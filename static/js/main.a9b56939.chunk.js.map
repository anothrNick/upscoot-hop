{"version":3,"sources":["pages/upload.js","pages/hop.js","index.js"],"names":["Dragger","Upload","UpScootUpload","props","updateFileType","e","setState","fileType","target","value","onChange","event","type","checked","name","postForm","state","fileList","url","pass","h","dis","length","formData","FormData","append","fetch","method","body","redirect","then","res","console","log","ok","uploading","msg","content","status","redirected","window","location","href","JSON","stringify","catch","onSubmit","undefined","this","onRemove","file","index","indexOf","newFileList","slice","splice","beforeUpload","xs","lg","span","offset","title","style","marginBottom","message","showIcon","layout","Item","label","Group","defaultValue","Button","className","placeholder","size","loading","onClick","Component","image_types","Hop","parseData","data","getMedia","ext","split","pop","toLowerCase","controls","class","src","includes","alt","splitUp","arr","n","rest","restUsed","partLength","Math","floor","result","i","end","add","push","renderMedia","year","childElements","map","element","columns","setTimeout","loadingImages","handleClick","selectedItem","key","query","search","ref","response","json","backgroundColor","mode","selectedKeys","Object","keys","Header","Layout","Footer","Content","history","createHashHistory","ReactDOM","render","theme","defaultSelectedKeys","hash","lineHeight","float","to","padding","path","component","from","textAlign","Date","getFullYear","document","getElementById"],"mappings":"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","file":"static/js/main.a9b56939.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { \n  Card, \n  Upload, \n  Icon, \n  Row, \n  Col, \n  Input, \n  Form, \n  Button, \n  Radio,\n  Checkbox, \n  Alert,\n} from 'antd';\n\nconst { Dragger } = Upload;\n\nclass UpScootUpload extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      fileType: \"file\",\n      fileList: [],\n      msg: undefined,\n      url: \"\",\n      pass: \"\",\n      h: false,\n      uploading: false,\n    }\n  }\n\n  updateFileType = (e) => {\n    this.setState({fileType: e.target.value});\n  }\n\n  onChange = (event) => {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value\n    });\n  }\n\n  postForm = () => {\n    const { fileList, url, pass, h } = this.state;\n    const dis = this;\n    if ((fileList.length > 0 || url !== \"\") && pass !== \"\") {\n      var formData = new FormData();\n      formData.append(\"file\", fileList[0]);\n      formData.append(\"url\", url);\n      formData.append(\"pass\", pass);\n      formData.append(\"h\", h);\n      \n      try {\n        fetch(\"https://i.sc0tt.net/\", {\n          method: \"POST\",\n          body: formData,\n          redirect: 'follow'\n        }).then(function (res) {\n          console.log(res);\n          if (res.ok) {\n            // all good\n            dis.setState({uploading: false, msg: {type: \"success\", content: \"Successfully uploaded!\"}});\n          } else if (res.status === 301) {\n            if (res.redirected) {\n              window.location.href = res.url;\n            }\n          } else{\n            dis.setState({uploading: false, msg: {type: \"error\", content: \"Failed to upload: \" + res.status}});\n          }\n        }, function (e) {\n          dis.setState({uploading: false, msg: {type: \"error\", content: \"Error uploading: \" + JSON.stringify(e)}});\n        }).catch(function(e){\n          dis.setState({uploading: false, msg: {type: \"error\", content: \"Error uploading: \" + JSON.stringify(e)}});\n        });\n      } catch (e) {\n        dis.setState({uploading: false, msg: {type: \"error\", content: \"Error uploading: \" + JSON.stringify(e)}});\n      }\n    } else {\n      this.setState({uploading: false, msg: {type: \"warning\", content: \"Please fill out all fields\"}});\n    }\n  }\n\n  onSubmit = () => {\n    this.setState({uploading: true, msg: undefined}, this.postForm);\n  }\n\n  render() {\n    const { fileType, uploading, fileList, url, pass, h, msg } = this.state;\n    const props = {\n      onRemove: file => {\n        this.setState(state => {\n          const index = state.fileList.indexOf(file);\n          const newFileList = state.fileList.slice();\n          newFileList.splice(index, 1);\n          return {\n            fileList: newFileList,\n          };\n        });\n      },\n      beforeUpload: file => {\n        this.setState(state => ({\n          fileList: [file],\n        }));\n        return false;\n      },\n      fileList,\n    };\n\n    return (\n      <Row>\n        <Col xs={24} lg={{span: 12, offset: 6}}>\n\n          <Card title=\"New File\">\n            {msg && <Alert style={{marginBottom: \"15px\"}} message={msg.content} type={msg.type} showIcon />}\n            <Form layout={\"vertical\"}>\n              <Form.Item label=\"File\">\n                <Radio.Group defaultValue={\"file\"} value={fileType} onChange={this.updateFileType}>\n                  <Radio.Button value=\"file\">File</Radio.Button>\n                  <Radio.Button value=\"url\">URL</Radio.Button>\n                </Radio.Group>\n                {fileType === \"file\" && \n                <Dragger {...props}>\n                  <p className=\"ant-upload-drag-icon\">\n                    <Icon type=\"inbox\" />\n                  </p>\n                  <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\n                  \n                </Dragger>\n                }\n                {fileType === \"url\" && \n                <Input placeholder=\"url to file...\" name=\"url\" value={url} onChange={this.onChange}/>}\n              </Form.Item>\n              \n              <Form.Item label=\"Password\">\n                <Input placeholder=\"upscoot password...\" type=\"password\" name=\"pass\" value={pass} onChange={this.onChange}/>\n              </Form.Item>\n              <Form.Item>\n                <Checkbox name=\"h\" checked={h} onChange={this.onChange}>Public</Checkbox>\n              </Form.Item>\n              <Form.Item style={{marginBottom: \"0px\"}}>\n                <Button type=\"primary\" size=\"large\" loading={uploading} onClick={this.onSubmit}>Upload</Button>\n              </Form.Item>\n            </Form>\n\n          </Card>\n\n        </Col>\n      </Row>\n    )\n  }\n}\n\nexport default UpScootUpload;","import React, { Component } from 'react';\nimport { \n  Spin,\n  Menu,\n} from 'antd';\n\nconst image_types = [\"jpg\", \"png\", \"gif\", \"jpeg\", \"webp\"];\n\nclass Hop extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: window.location.search,\n      data: {},\n      loading: true,\n      loadingImages: false,\n      selectedItem: 0\n    };\n  }\n\n  parseData = (data) => {\n    console.log(data);\n    this.setState({data, loading: false});\n  }\n\n  componentWillMount() {\n    const { query } = this.state;\n    const ref = this;\n    fetch(`https://i.sc0tt.net/hop.json${query}`, {\n        method: \"GET\"\n      }).then(response => response.json())\n        .then(data => {\n          ref.parseData(data);\n      });\n  }\n\n  getMedia = (url) => {\n    var ext = url.split('.').pop().toLowerCase();\n  \n    if (ext === 'mp4' || ext === 'webm') {\n      return (<video controls class=\"media\"><source src={url} type={`video/${ext}`} /></video>);\n    } else if (ext === 'mp3') {\n      return (<audio controls class=\"media\"><source src={url} type={`audio/${ext}`} /></audio>);\n    } else if (image_types.includes(ext)) {\n      return (<a href={url}><img src={url} alt={url} /></a>);\n    } else {\n      return url;\n    }\n  }\n\n  // i did not write this\n  splitUp = (arr, n) => {\n    var rest = arr.length % n, // how much to divide\n        restUsed = rest, // to keep track of the division over the elements\n        partLength = Math.floor(arr.length / n),\n        result = [];\n\n    for(var i = 0; i < arr.length; i += partLength) {\n        var end = partLength + i,\n            add = false;\n\n        if(rest !== 0 && restUsed) {\n            end++;\n            restUsed--;\n            add = true;\n        }\n\n        result.push(arr.slice(i, end)); // part of the array\n\n        if(add) {\n            i++; // also increment i in the case we added an extra element for division\n        }\n    }\n\n    return result;\n  }\n\n  renderMedia = (year) => {\n    const { data } = this.state;\n    const srcs = data[year];\n    const childElements = srcs.map(function(element){\n      return this.getMedia(element);\n    }, this);\n\n    var columns = this.splitUp(childElements, 4);\n    setTimeout(() => this.setState({loadingImages: false}), 1)\n    return (\n        <div className=\"urow\">\n            <div className=\"ucolumn\">\n              {columns.length > 0 && columns[0]}\n            </div>\n            <div className=\"ucolumn\">\n              {columns.length > 1 && columns[1]}\n            </div>\n            <div className=\"ucolumn\">\n              {columns.length > 2 && columns[2]}\n            </div>\n            <div className=\"ucolumn\">\n              {columns.length > 3 && columns[3]}\n            </div>\n        </div>\n    );\n  }\n\n  handleClick = e => {\n    this.setState({\n      loadingImages: true,\n      selectedItem: e.key,\n    });\n  };\n\n  render() {\n    const { loading, loadingImages, data, selectedItem } = this.state;\n    return (\n      <>\n        {loading && <Spin size=\"large\" className=\"center\" />}\n        {!loading &&\n          <>\n            <Menu style={{backgroundColor: \"transparent\"}} onClick={this.handleClick} mode=\"horizontal\" selectedKeys={[selectedItem + \"\"]}>\n              {Object.keys(data).map(function(key, i){\n                return (\n                  <Menu.Item key={i} >\n                    {key}\n                  </Menu.Item>\n                )\n              })}\n            </Menu>\n            {loadingImages && <Spin size=\"large\" className=\"center\" />}\n            {!loadingImages && this.renderMedia(Object.keys(data)[selectedItem])}\n          </>\n        }\n      </>\n    )\n  }\n}\n\nexport default Hop;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router, Route, Switch, Redirect, NavLink } from 'react-router-dom';\nimport { createHashHistory }  from 'history';\nimport { \n  Layout, \n  Menu\n} from 'antd';\n\nimport Upload from \"./pages/upload\";\nimport Hop from \"./pages/hop\";\n\nimport './index.css';\n\nconst { Header, Footer, Content } = Layout;\n\nconst history = createHashHistory();\n\nfunction App() {\n  return (\n\t\t<Router history={history}>\n      <Layout className=\"layout\">\n        <Header>\n          <div className=\"logo\" />\n          <Menu\n            theme=\"dark\"\n            mode=\"horizontal\"\n            defaultSelectedKeys={[window.location.hash]}\n            style={{ lineHeight: '64px', float: 'right' }}\n          >\n            <Menu.Item key=\"#/upload\"><NavLink to=\"/upload\">Upload</NavLink></Menu.Item>\n            <Menu.Item key=\"#/\"><NavLink to=\"/\">Hop</NavLink></Menu.Item>\n          </Menu>\n        </Header>\n        <Content style={{ padding: '50px' }}>\n\n          <Switch>\n            <Route path=\"/upload\" component={Upload} />\n            <Route path=\"/\" component={Hop} />\n\t\t\t\t    <Redirect from=\"/\" to=\"hop\" />\n          </Switch>\n          \n        </Content>\n        <Footer style={{ textAlign: 'center' }}>upscoot © 2018 - {new Date().getFullYear()}</Footer>\n      </Layout>\n    </Router>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}